version: "3.8"

services:
  eureka-server:
    container_name: apiGateway
    ports:
      - "8080:8080"
    build: ./
    environment:
      - spring.application.name=api-gateway
      - eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
      - logging.level.root=INFO
      - logging.level.org.springframework.cloud.gateway.route.RouteDefinitionLocator=INFO
      - logging.level.org.springframework.cloud.gateway=TRACE
      - spring.cloud.gateway.discovery.locator.enabled=true
      - spring.cloud.gateway.discovery.locator.lower-case-service-id=true
      - spring.cloud.gateway.routes[0].id=user-service
      - spring.cloud.gateway.routes[0].uri=http://localhost:8085
      - spring.cloud.gateway.routes[0].predicates[0]=Path=/**
